@page "/"
@inject ProductService ProductService
@inject CartService CartService

<PageTitle>MiLogo Papeler√≠a</PageTitle>

<BannerHero
    Tagline="nueva colecci√≥n"
    Title="Papeler√≠a bonita para ideas extraordinarias"
    Subtitle="Agenda tus metas, personaliza tu estilo y transforma tu escritorio con piezas √∫nicas creadas para mentes creativas."
    BackgroundImage="https://images.unsplash.com/photo-1526498460520-4c246339dccb?auto=format&fit=crop&w=1600&q=80"
    PrimaryActionText="Comprar ahora"
    PrimaryActionLink="/products" />

<ProductHighlights
    Tagline="Experiencia milogo"
    Title="Todo lo que necesitas para planear con estilo"
    Subtitle="Seleccionamos materiales sostenibles, colores suaves y texturas sensoriales para que cada p√°gina cuente tu historia."
    ActionText="Ver cat√°logo completo"
    ActionLink="/products"
    Items="@highlightItems" />

<section class="container py-5">
    <div class="row align-items-center g-5">
        <div class="col-12 col-lg-6 order-2 order-lg-1">
            <div class="d-flex flex-column gap-3">
                <span class="badge bg-accent text-uppercase fw-semibold align-self-start">Lo m√°s querido</span>
                <h2 class="fw-bold display-6 text-dark mb-0">Productos destacados</h2>
                <p class="text-secondary">Descubre nuestras piezas favoritas: agendas ilustradas, planners minimalistas y accesorios que combinan funcionalidad con dise√±o.</p>
            </div>
        </div>
        <div class="col-12 col-lg-6 order-1 order-lg-2">
            <div class="product-grid">
                @if (featuredProducts is null)
                {
                    <p class="text-secondary">Cargando productos...</p>
                }
                else
                {
                    @foreach (var product in featuredProducts)
                    {
                        <ProductCard Product="product" OnAddToCart="AddToCart" />
                    }
                }
            </div>
        </div>
    </div>
</section>

<section class="container py-5">
    <div class="row g-5 align-items-center">
        <div class="col-12 col-lg-6">
            <div class="story-card p-4 p-lg-5 rounded-4 h-100">
                <span class="badge bg-primary-subtle text-primary text-uppercase fw-semibold mb-3">Con√≥cenos</span>
                <h3 class="fw-bold mb-3">Dise√±amos papeler√≠a consciente en ediciones limitadas</h3>
                <p class="text-secondary mb-4">Somos un equipo de dise√±adoras que ama plasmar momentos especiales en papel. Trabajamos con proveedores locales y procesos responsables para ofrecerte piezas que se sienten tan bien como se ven.</p>
                <NavLink class="btn btn-primary rounded-pill px-4" href="/conocenos">Nuestra historia</NavLink>
            </div>
        </div>
        <div class="col-12 col-lg-6">
            <div class="subscribe-card rounded-4 p-4 p-lg-5">
                <h4 class="fw-bold mb-3">Suscr√≠bete a la newsletter</h4>
                <p class="text-secondary mb-4">Recibe lanzamientos exclusivos, talleres creativos y descuentos especiales directamente en tu correo.</p>
                <div class="input-group input-group-lg">
                    <input type="email" class="form-control rounded-start-pill" placeholder="Tu correo electr√≥nico" />
                    <button class="btn btn-accent rounded-end-pill px-4">Suscribirme</button>
                </div>
            </div>
        </div>
    </div>
</section>

@code {
    private IReadOnlyList<Product>? featuredProducts;

    private readonly IReadOnlyList<ProductHighlights.HighlightItem> highlightItems = new List<ProductHighlights.HighlightItem>
    {
        new("Personaliza tu tapa", "Elige paletas de color, tipograf√≠as y grabados √∫nicos para tu agenda.", "‚ú®"),
        new("Materiales sustentables", "Papel libre de √°cido y empaques reciclables para un impacto positivo.", "üå±"),
        new("Entrega express", "Recibe tu pedido en menos de 72 horas en las principales ciudades.", "üöö")
    };

    protected override async Task OnInitializedAsync()
    {
        featuredProducts = await ProductService.GetFeaturedAsync();
    }

    private async Task AddToCart(Product product)
    {
        await CartService.AddToCartAsync(product);
    }
}
